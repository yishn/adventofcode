// Part 1
j=M=>M.join(),I=document.body.innerText.split`\n`.map(x=>x&&x.split` => `.map(y=>y.split`/`.map(z=>[...z]))),[M]=I[62];for(N=i=0;i<5;i++,M=N)for(l=M.length,d=l%2+2,N=[...Array(l+l/d)].map(_=>[]),r=S=>S.map((r,y)=>r.map((_,x)=>S[d-1-x][y])),R=S=>[S,r(S),r(r(S)),r(r(r(S)))].map(j),x=0;x<l;x+=d)for(y=0;y<l;y+=d)I.find(([N])=>[...R(S),...R(S.map((_,y)=>S[d-1-y]))].includes(j(N)),S=M.slice(y,y+d).map(r=>r.slice(x,x+d)))[1].map((r,j)=>r.map((v,i)=>N[y+y/d+j][x+x/d+i]=v));j(M).match(/#/g).length

// Part 2
j=M=>M.join(),I=document.body.innerText.split`\n`.map(x=>x&&x.split` => `.map(y=>y.split`/`.map(z=>[...z]))),[M]=I[62];for(N=i=0;i<18;i++,M=N)for(l=M.length,d=l%2+2,N=[...Array(l+l/d)].map(_=>[]),r=S=>S.map((r,y)=>r.map((_,x)=>S[d-1-x][y])),R=S=>[S,r(S),r(r(S)),r(r(r(S)))].map(j),x=0;x<l;x+=d)for(y=0;y<l;y+=d)I.find(([N])=>[...R(S),...R(S.map((_,y)=>S[d-1-y]))].includes(j(N)),S=M.slice(y,y+d).map(r=>r.slice(x,x+d)))[1].map((r,j)=>r.map((v,i)=>N[y+y/d+j][x+x/d+i]=v));j(M).match(/#/g).length
